<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp React Tool (Pro Version)</title>
    <style>
        /* --- TEMA MATRIX / HACKER --- */
        body {
            background-color: #000000;
            color: #39ff14;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            flex-direction: column;
            padding: 20px;
        }

        .container {
            border: 2px solid #39ff14;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(57, 255, 20, 0.3);
            width: 100%;
            max-width: 450px;
            text-align: center;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(5px);
            margin-bottom: 20px;
        }

        h1 { margin-bottom: 20px; text-shadow: 0 0 10px #39ff14; }
        
        .input-group { margin-bottom: 20px; text-align: left; }
        label { font-weight: bold; display: block; margin-bottom: 8px; color: #fff; }
        
        input {
            width: 100%;
            padding: 12px;
            background-color: #0f0f0f;
            border: 1px solid #333;
            border-bottom: 2px solid #39ff14;
            color: #fff;
            border-radius: 5px;
            box-sizing: border-box;
            outline: none;
            transition: 0.3s;
            font-family: monospace;
        }
        input:focus { 
            background-color: #1a1a1a;
            box-shadow: 0 0 10px rgba(57, 255, 20, 0.2); 
        }

        /* --- TOMBOL GLOWING UPDATE --- */
        .glow-button {
            background-color: transparent;
            color: #39ff14;
            border: 2px solid #39ff14;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 2px;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        
        .glow-button:hover {
            background-color: #39ff14;
            color: #000;
            box-shadow: 0 0 20px #39ff14, 0 0 50px #39ff14;
            transform: scale(1.02);
        }

        .glow-button:active { transform: scale(0.98); }

        /* --- LOG BOX --- */
        .debug-box {
            width: 100%;
            max-width: 450px;
            background-color: #050505;
            border: 1px dashed #222;
            padding: 15px;
            border-radius: 8px;
            font-size: 11px;
            text-align: left;
            height: 150px;
            overflow-y: auto;
            color: #888;
        }
        
        .log-entry { margin-bottom: 4px; border-bottom: 1px solid #111; padding-bottom: 2px; }
        .log-time { color: #555; margin-right: 5px; }
        .log-info { color: #39ff14; }
        .log-error { color: #ff4444; font-weight: bold; }
        .log-warn { color: #ffdd44; }
    </style>
</head>
<body>

    <div class="container">
        <h1>‚ö° WA REACT PRO ‚ö°</h1>
        
        <div class="input-group">
            <label>Link Target (Channel/Chat)</label>
            <input type="text" id="linkInput" placeholder="https://whatsapp.com/channel/..." value="https://whatsapp.com/channel/0029VagAd3L4CrqiS4t2n008">
        </div>

        <div class="input-group">
            <label>Emoji (Pisah pakai spasi)</label>
            <input type="text" id="emojiInput" placeholder="üëç ‚ù§Ô∏è üòÇ üî•" value="üëç">
        </div>

        <button class="glow-button" onclick="kirimReact()">GAS KIRIM!</button>
    </div>

    <div class="debug-box" id="debugConsole">
        <div class="log-entry"><span class="log-time">SYSTEM</span> Siap! API Key sudah terpasang.</div>
    </div>

    <script>
        function log(message, type = 'info') {
            const consoleBox = document.getElementById('debugConsole');
            const time = new Date().toLocaleTimeString('id-ID', {hour12: false});
            let colorClass = 'log-info';
            if (type === 'error') colorClass = 'log-error';
            if (type === 'warn') colorClass = 'log-warn';

            consoleBox.innerHTML += `
                <div class="log-entry">
                    <span class="log-time">${time}</span> 
                    <span class="${colorClass}">${message}</span>
                </div>`;
            consoleBox.scrollTop = consoleBox.scrollHeight;
        }

        async function kirimReact() {
            const link = document.getElementById('linkInput').value;
            const emojiRaw = document.getElementById('emojiInput').value;
            const btn = document.querySelector('.glow-button');

            // --- API KEY KAMU ---
            const apiKey = "51b72a219771751d3377b6d0972ee9665bffce30cf159e8e3a3ceca54fe3e84f"; 

            if (!link || !emojiRaw) {
                alert("Isi formnya dulu bang! üóø");
                return;
            }

            btn.innerHTML = "‚è≥ MENGIRIM...";
            btn.style.opacity = "0.7";
            log("--- MEMULAI REQUEST ---", 'warn');

            // Format emoji
            const emojiList = emojiRaw.replace(/,/g, " ").split(/\s+/).filter(e => e.trim());
            const emojiFinal = emojiList.join(",");

            // URL Endpoint
            // Kita coba direct dulu pake key. Kalau masih error CORS, baru nanti kita akali.
            const url = `https://react.whyux-xec.my.id/api/rch?link=${encodeURIComponent(link)}&emoji=${encodeURIComponent(emojiFinal)}`;
            
            log(`üîë Menggunakan API Key: ...${apiKey.slice(-6)}`); // Hide sebagian key di log biar aman

            try {
                const response = await fetch(url, {
                    method: "GET",
                    headers: {
                        "x-api-key": apiKey, // Key dikirim lewat header
                        "User-Agent": "Mozilla/5.0" // Pura-pura jadi browser normal
                    }
                });

                log(`üì° Status: ${response.status}`);

                if (!response.ok) {
                    // Kalau masih 403, berarti API Key salah ATAU Origin diblokir
                    if(response.status === 403) throw new Error("403 Forbidden: Key salah atau Akses ditolak.");
                    if(response.status === 404) throw new Error("404 Not Found: Link API salah.");
                    if(response.status >= 500) throw new Error("Server API lagi down.");
                    throw new Error(`Error ${response.status}`);
                }

                const json = await response.json();
                
                if (json.success) {
                    log("‚úÖ SUKSES! Target hancur (canda) ü§£", 'info');
                    log(`üìù Detail: ${JSON.stringify(json)}`);
                    alert("BERHASIL WIR! üéâ\nCek channel WA sekarang.");
                } else {
                    log(`‚ùå GAGAL dari API: ${json.message}`, 'error');
                }

            } catch (error) {
                log(`‚ùå ERROR: ${error.message}`, 'error');
                
                // Deteksi CORS (Penyakit umum GitHub Pages)
                if (error.message.includes("Failed to fetch")) {
                    log("üí° INFO: Sepertinya kena blokir CORS Browser.", 'warn');
                    log("üí° SARAN: Coba install ekstensi Chrome 'Allow CORS' kalau mau jalanin di browser laptop.", 'warn');
                }
            } finally {
                btn.innerHTML = "GAS KIRIM!";
                btn.style.opacity = "1";
            }
        }
    </script>
</body>
</html>
